<!-- 0xdA97d6D4403F1F2AdACCf8e8B485E4b3B6490B8d hash contract address -->

<!-- 0x86486Ba8DA4fAa866cA4203ecbFed5f951EE157a contract address -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Owner Contract Interaction</title>
</head>
<body>
    <h1>Owner Contract Interaction</h1>
   


  

   <button  onclick="j1()">j1</button>
   <button  onclick="j2()">j2</button>
   <button  onclick="stake()">stake</button>

   <button  onclick="play()">play</button>
 

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.10.0/web3.min.js"></script>
    <script>
        

    
        const contractABI = [
	{
		"constant": true,
		"inputs": [
			{
				"name": "_c1",
				"type": "uint8"
			},
			{
				"name": "_c2",
				"type": "uint8"
			}
		],
		"name": "win",
		"outputs": [
			{
				"name": "w",
				"type": "bool"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [],
		"name": "j2Timeout",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "stake",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "c2",
		"outputs": [
			{
				"name": "",
				"type": "uint8"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "c1Hash",
		"outputs": [
			{
				"name": "",
				"type": "bytes32"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "_c2",
				"type": "uint8"
			}
		],
		"name": "play",
		"outputs": [],
		"payable": true,
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "j2",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "lastAction",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "_c1",
				"type": "uint8"
			},
			{
				"name": "_salt",
				"type": "uint256"
			}
		],
		"name": "solve",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "j1",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [],
		"name": "j1Timeout",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "TIMEOUT",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"name": "_c1Hash",
				"type": "bytes32"
			},
			{
				"name": "_j2",
				"type": "address"
			}
		],
		"payable": true,
		"stateMutability": "payable",
		"type": "constructor"
	}
]
     
     
const web3 = new Web3(window.ethereum);
const urlParams = new URLSearchParams(window.location.search);
const id = urlParams.get('id');
console.log(id);

let contractAddress = id;
console.log(contractAddress);

let hello; 
let contract = new web3.eth.Contract(contractABI, contractAddress);

		async function j1() {
			
        try {
                
           const j1= await contract.methods.j1().call()
		   console.log(j1);
          
            } catch (error) {
                console.error(error);
            }
        }
		
		async function j2() {
			
        try {
           const j2= await contract.methods.j2().call()
		   console.log(j2);
            } catch (error) {
                console.error(error);
            }
        }
        
        let stakeValue;

async function stake() {
    try {
        stakeValue = await contract.methods.stake().call();
        console.log("Current Stake:", web3.utils.fromWei(stakeValue, 'ether'), "Ether");
    } catch (error) {
        console.error(error);
    }
}


// Call this function when your page loads
stake();

            async function play() {
        try {
                const accounts = await web3.eth.getAccounts();
				console.log(accounts);
                const playerAddress = accounts[0];
				const aa=2;
                
           const c2= await contract.methods.play(aa).send({ from: playerAddress, value: stakeValue });
		   console.log(c2);
            } catch (error) {
                console.error(error);
            }
        }


			
    </script>
</body>
</html>